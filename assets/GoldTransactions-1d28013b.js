import{d as m,o as u,h as p,i as l,j as h,z as f,A as g,b as s,f as i,m as c,w as d,e as r,t as v,u as w,D as b}from"./index-ed30ecb5.js";import{_ as R}from"./DynamicTable-5851fb55.js";import{_ as C}from"./CAlert-5e5ba56f.js";const D={class:"pricing-header p-3 pb-md-4 mx-auto text-center"},k={class:"row"},y=s("div",{class:"col"},[s("div",{class:"mb-3 row text-start"},[s("div",{class:"col-sm-10"},[s("span",{class:"display-6 fw-normal"},"Gold Transactions")])])],-1),N={class:"col text-end"},A=s("span",{class:"material-icons"},"add",-1),M={class:"text-center"},O=s("div",{class:"spinner-grow",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),T={data:function(){return{items:[],allowaction:!0,actions:[],actionMapper:[],loadingmsg:"",alertmode:"",alertmsg:"",datefrom:"",dateto:""}},mounted:function(){this.loadDates(),this.loadPayments()},methods:{loadDates:function(){},loadPayments:function(t){t&&t.preventDefault();var a=this;a.loadingmsg="Fetching transactions";var n={};f.list(this.datefrom,this.dateto).then(o=>{_.each(o,function(e){e.pureWeight=e.weight*(e.purity/1e3),n[e.id]=a.actions}),a.actionMapper=n,a.items=o}).catch(o=>{console.log(o),a.alertmode=g.ERROR,a.alertmsg="Could not fetch details"}).finally(()=>{a.loadingmsg=""})},showReceipt:function(t){if(t.weight>0){var a=this.$basedomainname+"goldtransaction/"+t.receiptNumber;window.open(a,"_blank")}else if(t.invoiceRef){var a=this.$basedomainname+"invoices/"+t.invoiceRef;window.open(a,"_blank")}}}},$=Object.assign(T,{__name:"GoldTransactions",setup(t){return(a,n)=>{const o=m("RouterLink");return u(),p(h,null,{default:l(()=>[s("div",D,[s("div",k,[y,s("div",N,[i(o,{to:"/goldtransaction",class:"btn btn-outline-success"},{default:l(()=>[c(" Add"),A]),_:1})])]),d(s("div",null,[s("div",M,[c(v(a.loadingmsg)+" ",1),O])],512),[[r,a.loadingmsg]]),d(s("div",null,[i(C,{msg:a.alertmsg,mode:a.alertmode},null,8,["msg","mode"]),i(R,{onViewClick:a.showReceipt,items:a.items,columns:w(b).GOLD_TRANSACTION_COLUMNS,allowaction:a.allowaction,actionmapper:a.actionMapper,actionmapperidentifier:"invoiceNum"},null,8,["onViewClick","items","columns","allowaction","actionmapper"])],512),[[r,!a.loadingmsg]])])]),_:1})}}});export{$ as default};
