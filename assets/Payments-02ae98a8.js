import{d,o as p,h as u,i,j as h,B as f,A as w,b as t,f as n,m as l,w as c,e as r,t as v}from"./index-6619cc03.js";import{_ as g}from"./DynamicTable-4ef1b40a.js";import{_ as y}from"./CAlert-b391320e.js";const b={class:"pricing-header p-3 pb-md-4 mx-auto text-center"},k={class:"row"},R=t("div",{class:"col"},[t("div",{class:"mb-3 row text-start"},[t("div",{class:"col-sm-10"},[t("span",{class:"display-6 fw-normal"},"Cash Transactions")])])],-1),C={class:"col text-end"},D=t("span",{class:"material-icons"},"add",-1),N={class:"text-center"},V=t("div",{class:"spinner-grow",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),A={data:function(){return{items:[],columns:[{name:"receiptNumber",show:!0},{name:"paymentDate",show:!0,type:"date"},{name:"customer",show:!0},{name:"amount",show:!0,type:"amount"},{name:"description",show:!0}],allowaction:!0,actions:[{identifier:"viewClick",materialicon:"print",title:"View and Print Invoice"}],actionMapper:[],loadingmsg:"",alertmode:"",alertmsg:"",datefrom:"",dateto:""}},mounted:function(){this.loadDates(),this.loadPayments()},methods:{loadDates:function(){},loadPayments:function(a){a&&a.preventDefault();var e=this;e.loadingmsg="Fetching payments";var o={};f.list(this.datefrom,this.dateto).then(s=>{_.each(s,function(m){o[m.id]=e.actions}),e.actionMapper=o,e.items=s}).catch(s=>{console.log(s),e.alertmode=w.ERROR,e.alertmsg="Could not fetch payments"}).finally(()=>{e.loadingmsg=""})},showReceipt:function(a){if(a.amount>0){var e=this.$basedomainname+"payments/"+a.receiptNumber;window.open(e,"_blank")}else if(a.invoiceRef){var e=this.$basedomainname+"invoices/"+a.invoiceRef;window.open(e,"_blank")}}}},$=Object.assign(A,{__name:"Payments",setup(a){return(e,o)=>{const s=d("RouterLink");return p(),u(h,null,{default:i(()=>[t("div",b,[t("div",k,[R,t("div",C,[n(s,{to:"/payment",class:"btn btn-outline-success"},{default:i(()=>[l(" Add"),D]),_:1})])]),c(t("div",null,[t("div",N,[l(v(e.loadingmsg)+" ",1),V])],512),[[r,e.loadingmsg]]),c(t("div",null,[n(y,{msg:e.alertmsg,mode:e.alertmode},null,8,["msg","mode"]),n(g,{onViewClick:e.showReceipt,items:e.items,columns:e.columns,allowaction:e.allowaction,actionmapper:e.actionMapper,actionmapperidentifier:"invoiceNum"},null,8,["onViewClick","items","columns","allowaction","actionmapper"])],512),[[r,!e.loadingmsg]])])]),_:1})}}});export{$ as default};
