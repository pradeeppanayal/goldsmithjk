import{d as m,o as u,h as p,i as l,_ as f,y as h,A as g,b as s,f as i,l as c,w as d,e as r,t as v,u as w,D as b}from"./index-ab8a4c79.js";import{_ as R}from"./DynamicTable-f7d14373.js";import{_ as y}from"./CAlert-098161b8.js";const C={class:"pricing-header p-3 pb-md-4 mx-auto text-center"},D={class:"row"},k=s("div",{class:"col"},[s("div",{class:"mb-3 row text-start"},[s("div",{class:"col-sm-10"},[s("span",{class:"display-6 fw-normal"},"Gold Transactions")])])],-1),N={class:"col text-end"},A=s("span",{class:"material-icons"},"add",-1),M={class:"text-center"},O=s("div",{class:"spinner-grow",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),L={data:function(){return{items:[],allowaction:!0,actions:[],actionMapper:[],loadingmsg:"",alertmode:"",alertmsg:"",datefrom:"",dateto:""}},mounted:function(){this.loadDates(),this.loadPayments()},methods:{loadDates:function(){},loadPayments:function(o){o&&o.preventDefault();var a=this;a.loadingmsg="Fetching transactions";var n={};h.list(this.datefrom,this.dateto).then(t=>{_.each(t,function(e){e.pureWeight=e.weight*(e.purity/1e3),n[e.id]=a.actions}),a.actionMapper=n,a.items=t}).catch(t=>{console.log(t),a.alertmode=g.ERROR,a.alertmsg="Could not fetch details"}).finally(()=>{a.loadingmsg=""})},showReceipt:function(o){if(o.weight>0){var a=this.$basedomainname+"goldtransaction/"+o.receiptNumber;window.open(a,"_blank")}else if(o.invoiceRef){var a=this.$basedomainname+"invoices/"+o.invoiceRef;window.open(a,"_blank")}}}},$=Object.assign(L,{__name:"GoldTransactions",setup(o){return(a,n)=>{const t=m("RouterLink");return u(),p(f,null,{default:l(()=>[s("div",C,[s("div",D,[k,s("div",N,[i(t,{to:"/goldtransaction",class:"btn btn-outline-success"},{default:l(()=>[c(" Add"),A]),_:1})])]),d(s("div",null,[s("div",M,[c(v(a.loadingmsg)+" ",1),O])],512),[[r,a.loadingmsg]]),d(s("div",null,[i(y,{msg:a.alertmsg,mode:a.alertmode},null,8,["msg","mode"]),i(R,{onViewClick:a.showReceipt,items:a.items,columns:w(b).GOLD_TRANSACTION_COLUMNS,allowaction:a.allowaction,actionmapper:a.actionMapper,actionmapperidentifier:"invoiceNum"},null,8,["onViewClick","items","columns","allowaction","actionmapper"])],512),[[r,!a.loadingmsg]])])]),_:1})}}});export{$ as default};
