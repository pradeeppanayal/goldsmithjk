import{_ as g,C as c,A as h,d as C,o as n,c as l,w as m,e as p,b as s,t as d,f as k,F as u,r as f,g as v,v as b,a as w}from"./index-fba89431.js";import{_ as V}from"./CAlert-5080164c.js";const U={props:["show","fields","actualobj","title","dao"],emits:["cancel","save"],data:function(){return{item:{},alertmsg:"",alertmode:"",loading:!1}},watch:{show:function(e){this.item={...this.actualobj},this.loading=!1},actualobj:function(e){if(!e){this.item={};return}this.item={...this.actualobj}}},methods:{performClose:function(e){e&&e.preventDefault(),!this.loading&&this.$emit("cancel")},validate:function(){var e=this;for(var o of this.fields)if(o.required&&!this.item[o.name]&&!o.defaulltField)return c.showAlert(e,'The field "'+o.name+'" is required',h.ERROR),!1;return!0},performSave:function(e){if(e&&e.preventDefault(),!this.loading&&this.validate()){var o=this;o.loading=!0,this.item.status=this.status??this.$statusLabelMapper.enabled,o.dao.addOrUpdate(this.item).then(()=>{o.loading=!1,o.$emit("save",this.item)}).catch(i=>{console.log(i),c.showAlert(o,"Could not perform save.",h.ERROR)}).finally(()=>{o.loading=!1})}}},components:{CAlert:V}},S={class:"modal show",style:{display:"block"}},A={class:"modal-dialog"},D={class:"modal-content"},R={class:"modal-header"},O={class:"modal-title",id:"staticBackdropLabel"},j={class:"modal-body"},B=["id","onUpdate:modelValue"],M=["onUpdate:modelValue","id"],N=["value"],q=["onUpdate:modelValue","id"],E=s("option",{value:"yes"},"Yes",-1),F=s("option",{value:"yes"},"No",-1),L=[E,F],T=["onUpdate:modelValue","id"],Y=["for"],z={class:"modal-footer"},G=["disabled"],H={key:0,class:"modal-backdrop show"};function I(e,o,i,J,K,r){const _=C("CAlert");return n(),l(u,null,[m(s("div",null,[s("div",S,[s("form",null,[s("div",A,[s("div",D,[s("div",R,[s("h5",O,d(i.title),1),s("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:o[0]||(o[0]=(...t)=>r.performClose&&r.performClose(...t))})]),s("div",j,[k(_,{msg:e.alertmsg,mode:e.alertmode},null,8,["msg","mode"]),(n(!0),l(u,null,f(i.fields,(t,y)=>m((n(),l("div",{class:"form-floating mb-3",key:y},[t.type=="number"?m((n(),l("input",{key:0,type:"number",id:e.item[t.name],"onUpdate:modelValue":a=>e.item[t.name]=a,class:"form-control"},null,8,B)),[[v,e.item[t.name]]]):t.type=="option"?m((n(),l("select",{key:1,"onUpdate:modelValue":a=>e.item[t.name]=a,id:e.item[t.name],class:"form-control"},[(n(!0),l(u,null,f(t.options,a=>(n(),l("option",{value:a.value},d(a.name),9,N))),256))],8,M)),[[b,e.item[t.name]]]):t.type=="yesno"?m((n(),l("select",{key:2,"onUpdate:modelValue":a=>e.item[t.name]=a,id:e.item[t.name],class:"form-control"},L,8,q)),[[b,e.item[t.name]]]):m((n(),l("input",{key:3,type:"text","onUpdate:modelValue":a=>e.item[t.name]=a,id:e.item[t.name],class:"form-control"},null,8,T)),[[v,e.item[t.name]]]),s("label",{for:e.item[t.name],class:"form-label"},d(t.name)+" "+d(t.required?"":"(Optional)"),9,Y)])),[[p,!t.readOnly]])),128))]),s("div",z,[s("button",{type:"button",class:"btn btn-secondary",onClick:o[1]||(o[1]=(...t)=>r.performClose&&r.performClose(...t))},"Close"),s("button",{type:"submit",class:"btn btn-primary",onClick:o[2]||(o[2]=(...t)=>r.performSave&&r.performSave(...t)),disabled:e.loading},d(e.loading?"Saving...":"Save"),9,G)])])])])])],512),[[p,i.show]]),i.show?(n(),l("div",H)):w("",!0)],64)}const W=g(U,[["render",I]]);export{W as D};
