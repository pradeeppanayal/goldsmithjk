import{d as m,o as p,h as u,i,_ as f,x as h,A as g,b as e,f as n,l,w as c,e as d,t as v,u as w,D as y}from"./index-9ae72514.js";import{_ as C}from"./DynamicTable-438c85b5.js";import{_ as b}from"./CAlert-ab377059.js";const R={class:"pricing-header p-3 pb-md-4 mx-auto text-center"},k={class:"row"},D=e("div",{class:"col"},[e("div",{class:"mb-3 row text-start"},[e("div",{class:"col-sm-10"},[e("span",{class:"display-6 fw-normal"},"Cash Transactions")])])],-1),N={class:"col text-end"},A=e("span",{class:"material-icons"},"add",-1),M={class:"text-center"},S=e("div",{class:"spinner-grow",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),V={data:function(){return{items:[],allowaction:!0,actions:[{identifier:"viewClick",materialicon:"print",title:"View and Print Invoice"}],actionMapper:[],loadingmsg:"",alertmode:"",alertmsg:"",datefrom:"",dateto:""}},mounted:function(){this.loadDates(),this.loadPayments()},methods:{loadDates:function(){},loadPayments:function(s){s&&s.preventDefault();var a=this;a.loadingmsg="Fetching payments";var o={};h.list(this.datefrom,this.dateto).then(t=>{_.each(t,function(r){o[r.id]=a.actions}),a.actionMapper=o,a.items=t}).catch(t=>{console.log(t),a.alertmode=g.ERROR,a.alertmsg="Could not fetch payments"}).finally(()=>{a.loadingmsg=""})},showReceipt:function(s){if(s.amount>0){var a=this.$basedomainname+"payments/"+s.receiptNumber;window.open(a,"_blank")}else if(s.invoiceRef){var a=this.$basedomainname+"invoices/"+s.invoiceRef;window.open(a,"_blank")}}}},P=Object.assign(V,{__name:"Payments",setup(s){return(a,o)=>{const t=m("RouterLink");return p(),u(f,null,{default:i(()=>[e("div",R,[e("div",k,[D,e("div",N,[n(t,{to:"/payment",class:"btn btn-outline-success"},{default:i(()=>[l(" Add"),A]),_:1})])]),c(e("div",null,[e("div",M,[l(v(a.loadingmsg)+" ",1),S])],512),[[d,a.loadingmsg]]),c(e("div",null,[n(b,{msg:a.alertmsg,mode:a.alertmode},null,8,["msg","mode"]),n(C,{onViewClick:a.showReceipt,items:a.items,columns:w(y).CASH_TRANSACTION_COLUMNS,allowaction:a.allowaction,actionmapper:a.actionMapper,actionmapperidentifier:"invoiceNum"},null,8,["onViewClick","items","columns","allowaction","actionmapper"])],512),[[d,!a.loadingmsg]])])]),_:1})}}});export{P as default};
