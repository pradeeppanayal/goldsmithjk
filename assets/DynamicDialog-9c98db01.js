import{C as h,A as p,d as g,o as n,c as l,w as i,e as v,b as s,t as d,f as C,F as u,r as f,g as c,v as b,a as k}from"./index-ab8a4c79.js";import{_ as w}from"./CAlert-098161b8.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";const U={props:["show","fields","actualobj","title","dao"],emits:["cancel","save"],data:function(){return{item:{},alertmsg:"",alertmode:"",loading:!1}},watch:{show:function(e){this.item={...this.actualobj},this.loading=!1},actualobj:function(e){if(!e){this.item={};return}this.item={...this.actualobj}}},methods:{performClose:function(e){e&&e.preventDefault(),!this.loading&&this.$emit("cancel")},validate:function(){var e=this;for(var o of this.fields)if(o.required&&!this.item[o.name]&&!o.defaulltField)return h.showAlert(e,'The field "'+o.name+'" is required',p.ERROR),!1;return!0},performSave:function(e){if(e&&e.preventDefault(),!this.loading&&this.validate()){var o=this;o.loading=!0,this.item.status=this.status??this.$statusLabelMapper.enabled,this.$emit("save",this.item),o.dao.addOrUpdate(this.item).then(()=>{o.loading=!1,o.$emit("save",this.item)}).catch(m=>{console.log(m),h.showAlert(o,"Could not perform save.",p.ERROR)}).finally(()=>{o.loading=!1})}}},components:{CAlert:w}},S={class:"modal show",style:{display:"block"}},A={class:"modal-dialog"},D={class:"modal-content"},R={class:"modal-header"},O={class:"modal-title",id:"staticBackdropLabel"},j={class:"modal-body"},B=["id","onUpdate:modelValue"],M=["onUpdate:modelValue","id"],N=["value"],q=["onUpdate:modelValue","id"],E=s("option",{value:"yes"},"Yes",-1),F=s("option",{value:"yes"},"No",-1),L=[E,F],T=["id","onUpdate:modelValue"],Y=["onUpdate:modelValue","id"],z=["for"],G={class:"modal-footer"},H=["disabled"],I={key:0,class:"modal-backdrop show"};function J(e,o,m,K,P,r){const y=g("CAlert");return n(),l(u,null,[i(s("div",null,[s("div",S,[s("form",null,[s("div",A,[s("div",D,[s("div",R,[s("h5",O,d(m.title),1),s("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:o[0]||(o[0]=(...t)=>r.performClose&&r.performClose(...t))})]),s("div",j,[C(y,{msg:e.alertmsg,mode:e.alertmode},null,8,["msg","mode"]),(n(!0),l(u,null,f(m.fields,(t,_)=>i((n(),l("div",{class:"form-floating mb-3",key:_},[t.type=="number"?i((n(),l("input",{key:0,type:"number",id:e.item[t.name],"onUpdate:modelValue":a=>e.item[t.name]=a,class:"form-control"},null,8,B)),[[c,e.item[t.name]]]):t.type=="option"?i((n(),l("select",{key:1,"onUpdate:modelValue":a=>e.item[t.name]=a,id:e.item[t.name],class:"form-control"},[(n(!0),l(u,null,f(t.options,a=>(n(),l("option",{value:a.value},d(a.name),9,N))),256))],8,M)),[[b,e.item[t.name]]]):t.type=="yesno"?i((n(),l("select",{key:2,"onUpdate:modelValue":a=>e.item[t.name]=a,id:e.item[t.name],class:"form-control"},L,8,q)),[[b,e.item[t.name]]]):t.type=="password"?i((n(),l("input",{key:3,type:"password",id:e.item[t.name],"onUpdate:modelValue":a=>e.item[t.name]=a,class:"form-control"},null,8,T)),[[c,e.item[t.name]]]):i((n(),l("input",{key:4,type:"text","onUpdate:modelValue":a=>e.item[t.name]=a,id:e.item[t.name],class:"form-control"},null,8,Y)),[[c,e.item[t.name]]]),s("label",{for:e.item[t.name],class:"form-label"},d(t.name)+" "+d(t.required?"":"(Optional)"),9,z)])),[[v,!t.readOnly]])),128))]),s("div",G,[s("button",{type:"button",class:"btn btn-secondary",onClick:o[1]||(o[1]=(...t)=>r.performClose&&r.performClose(...t))},"Close"),s("button",{type:"submit",class:"btn btn-primary",onClick:o[2]||(o[2]=(...t)=>r.performSave&&r.performSave(...t)),disabled:e.loading},d(e.loading?"Saving...":"Save"),9,H)])])])])])],512),[[v,m.show]]),m.show?(n(),l("div",I)):k("",!0)],64)}const Z=V(U,[["render",J]]);export{Z as D};
