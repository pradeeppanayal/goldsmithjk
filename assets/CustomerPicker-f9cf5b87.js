import{o as i,c,h as n,q as l,m as d}from"./index-ada051fb.js";import{_ as a}from"./_plugin-vue_export-helper-c27b6911.js";const o={props:["selected","readonly","items","placeholder"],emits:["selected"],data:function(){return{ready:!1,ref_id:"sel2"}},mounted:function(){},watch:{items:function(){var e=this;e.items&&($(this.$refs[this.ref_id]).select2({placeholder:{id:"",text:e.placeholder??"Select an item"},data:e.items}),$(this.$refs[this.ref_id]).on("select2:select",function(t){e.$emit("selected",t.params.data.id)}),$(this.$refs[this.ref_id]).val(this.selected),$(this.$refs[this.ref_id]).trigger("change"),this.ready=!0)},selected:function(){this.ready&&($(this.$refs[this.ref_id]).val(this.selected),$(this.$refs[this.ref_id]).trigger("change"))}}},f=["disabled"];function m(e,t,s,r,p,g){return i(),c("select",{ref:e.ref_id,class:"form-control",disabled:s.readonly},null,8,f)}const u=a(o,[["render",m]]),h={props:["seleceted"],emits:["selected"],data:function(){return{customers:[],items:[],placeholder:"Select a customer"}},mounted:function(){this.loadCustomers()},methods:{loadCustomers:function(){var e=this;const t=l.getCurrentUser().email==this.$adminMailId;d.list(null,!0,t).then(s=>{e.customers=s,e.items=_.map(s,function(r){return{id:r.id,text:r.Name}})})},itemSelected:function(e){var t=_.find(this.customers,function(s){return s.id==e});this.$emit("selected",t)}}},v=Object.assign(h,{__name:"CustomerPicker",setup(e){return(t,s)=>(i(),n(u,{ref_id:"customer",items:t.items,selected:e.seleceted,onSelected:t.itemSelected,placeholder:t.placeholder},null,8,["items","selected","onSelected","placeholder"]))}});export{v as _};
